@import url("https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@400;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Varela+Round&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Serif+Pro&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Kalam&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Varela+Round&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 60 9% 98%;
    /* stone-50 */
    --foreground: 20 14.3% 4.1%;
    --card: 0 0% 100%;
    --card-foreground: 20 14.3% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 20 14.3% 4.1%;
    --primary: 47.9 95.8% 53.1%;
    --primary-foreground: 26 83.3% 14.1%;
    --secondary: 24 5.4% 63.9%;
    --secondary-foreground: 24 9% 10%;
    --muted: 60 4.8% 95.9%;
    --muted-foreground: 25 5.3% 44.7%;
    --accent: 60 4.8% 95.9%;
    --accent-foreground: 24 9.8% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 20 5.9% 90%;
    --input: 20 5.9% 90%;
    --ring: 47.9 95.8% 53.1%;
    --success: 152 69% 46%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --radius: 1rem;
    
    /* Mobile-optimized touch targets */
    --touch-target-min: 44px;
    --touch-target-comfortable: 48px;
    --checked-text: 0 0% 45%;
    --checked-mark: 142 70% 45%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --sidebar: 60 9% 97%;
    --sidebar-foreground: 24 9% 10%;
    --sidebar-primary: 37 92% 50%;
    --sidebar-primary-foreground: 47 100% 96%;
    --sidebar-accent: 24 5% 44%;
    --sidebar-accent-foreground: 60 9% 97%;
    --sidebar-border: 23 5% 82%;
    --sidebar-ring: 37 92% 50%;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);

    /* Notebook Colors */
    --notebook-line: 210 20% 85%;
    --notebook-margin: 0 80% 70%;
    --notebook-hole: 210 20% 90%;
  }

  .dark {
    --background: 222 47% 11%;
    /* slate-950 */
    --foreground: 0 0% 98%;
    --card: 222 47% 11%;
    --card-foreground: 0 0% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 0 0% 98%;
    --primary: 47.9 95.8% 53.1%;
    --primary-foreground: 26 83.3% 14.1%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 0 0% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --success: 152 69% 50%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --checked-text: 0 0% 65%;
    --checked-mark: 142 70% 50%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    --sidebar: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);

    /* Notebook Colors Dark */
    --notebook-line: 240 5% 25%;
    --notebook-margin: 0 60% 40%;
    --notebook-hole: 240 5% 20%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-rubik;
    font-feature-settings: "kern" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@layer utilities {
  .completed-item {
    position: relative;
    text-decoration: line-through;
    text-decoration-thickness: 2px;
    text-decoration-color: hsl(var(--checked-text));
    opacity: 0.6;
  }

  /* Juicy checkbox animations */
  @keyframes check-bounce {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.3); }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes checkbox-pulse {
    0% { box-shadow: 0 0 0 0 hsl(var(--success) / 0.5); }
    70% { box-shadow: 0 0 0 12px hsl(var(--success) / 0); }
    100% { box-shadow: 0 0 0 0 hsl(var(--success) / 0); }
  }

  @keyframes strike-through {
    0% { width: 0; }
    100% { width: 100%; }
  }

  @keyframes confetti {
    0% {
      transform: translateY(0) translateX(0) rotate(0deg) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(var(--velocity-y, -60px)) translateX(var(--velocity-x, 0px)) rotate(720deg) scale(0);
      opacity: 0;
    }
  }

  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 0.5;
    }
    100% {
      transform: scale(4);
      opacity: 0;
    }
  }

  @keyframes float-up {
    0% {
      transform: translateY(0) scale(0.8);
      opacity: 0;
    }
    20% { opacity: 1; }
    50% {
      transform: translateY(-30px) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-60px) scale(0.9);
      opacity: 0;
    }
  }

  .animate-check-bounce {
    animation: check-bounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .animate-checkbox-pulse {
    animation: checkbox-pulse 0.6s ease-out;
  }

  .animate-confetti {
    animation: confetti 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  .animate-ripple {
    animation: ripple 0.6s ease-out forwards;
  }

  /* Glassmorphism utilities */
  .glass {
    background: hsl(var(--card) / 0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--border) / 0.5);
  }

  .glass-strong {
    background: hsl(var(--card) / 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid hsl(var(--border) / 0.3);
  }

  /* Strike-through animation */
  .strike-animate {
    position: relative;
  }

  .strike-animate::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    height: 2px;
    background: hsl(var(--success));
    animation: strike-through 0.3s ease-out forwards;
  }
}

/* Force solid background for mobile menu overlay */
.mobile-menu-overlay {
  background-color: #ffffff !important;
  background: #ffffff !important;
  background-image: none !important;
  opacity: 1 !important;
}

/* Mobile menu slide animation */
@keyframes slide-in-from-right {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-out-to-right {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

.animate-slide-in-right {
  animation: slide-in-from-right 0.25s ease-out forwards;
}

.animate-slide-out-right {
  animation: slide-out-to-right 0.2s ease-in forwards;
}

/* Touch-friendly tap targets */
@layer utilities {
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }
  
  .touch-target-sm {
    @apply min-h-[36px] min-w-[36px];
  }
}

/* Smooth transitions for interactive elements */
.transition-smooth {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Responsive text scaling */
@media (max-width: 374px) {
  html {
    font-size: 14px;
  }
}

/* Prevent horizontal overflow on mobile */
.overflow-x-safe {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Ensure text wraps properly in flex containers */
.text-wrap {
  word-break: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* RTL/LTR Responsive Layout Support for Shopping List Items */

/* Mobile (< 640px): Stack vertically with proper direction support */
@media (max-width: 639px) {
  .shopping-item-container {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  [dir="rtl"] .shopping-item-container {
    direction: rtl;
    text-align: right;
  }

  [dir="ltr"] .shopping-item-container {
    direction: ltr;
    text-align: left;
  }

  /* Left group on mobile */
  .shopping-item-left {
    width: 100%;
    justify-content: flex-start;
  }

  /* Right group stacks below on mobile */
  .shopping-item-right {
    width: 100%;
    justify-content: flex-start;
  }

  [dir="rtl"] .shopping-item-right {
    flex-direction: row-reverse;
  }

  [dir="ltr"] .shopping-item-right {
    flex-direction: row;
  }
}

/* Tablet & Desktop (>= 640px): Horizontal split layout */
@media (min-width: 640px) {
  .shopping-item-container {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    width: 100% !important;
    gap: 0.5rem !important;
    flex-wrap: nowrap !important;
  }

  [dir="rtl"] .shopping-item-container {
    direction: rtl;
  }

  [dir="ltr"] .shopping-item-container {
    direction: ltr;
  }

  /* Left group: Checkbox + Item Name (fixed width with flex-grow) */
  .shopping-item-left {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 0.5rem !important;
    flex: 1 1 auto !important;
    min-width: 0 !important;
    flex-wrap: nowrap !important;
  }

  [dir="ltr"] .shopping-item-left {
    justify-content: flex-start !important;
  }

  [dir="rtl"] .shopping-item-left {
    justify-content: flex-end !important;
  }

  /* Right group: Quantity + Unit + Delete (fixed controls) */
  .shopping-item-right {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 0.5rem !important;
    flex-shrink: 0 !important;
    flex-wrap: nowrap !important;
  }

  [dir="ltr"] .shopping-item-right {
    justify-content: flex-end !important;
  }

  [dir="rtl"] .shopping-item-right {
    justify-content: flex-start !important;
    flex-direction: row-reverse !important;
  }
}